"0","# preparing shapefile data to match the dataset"
"0","#in the below code iam changing the name of countries to match the dataset to facilitate the join function"
"0",""
"0","countries_poly@data<- countries_poly@data%>%"
"0","  mutate(ADMIN = recode(ADMIN, `United States of America` = ""United States"","
"0","                        `Cabo Verde` = ""Cape Verde"","
"0","                        `Czechia` = ""Czech Republic"","
"0","                        `Gambia` = ""The Gambia"","
"0","                        `São Tomé and Principe` = ""Sao Tome and Principe"","
"0","                        `Republic of Serbia` = ""Serbia"","
"0","                        `United Republic of Tanzania` = ""Tanzania"","
"0","                        `Vatican` = ""Vatican City"","
"0","                        `Ireland` = ""Republic of Ireland"","
"0","                        `Palestine` = ""Palestinian National Authority"","
"0","                        `eSwatini` = ""Eswatini"""
"0","                        )"
"0","         )  "
"0",""
"0",""
"0","countries_poly@data<- left_join(countries_poly@data, dataset, by=c('ADMIN'='Country'), keep=TRUE)"
"0",""
"0","map_text<-paste(""Country Name: "",countries_poly@data$FORMAL_EN,""<br/>"","
"0","                ""Capital: "",countries_poly@data$`Capital/Major City`,""<br/>"","
"0","                ""Official Language: "",countries_poly@data$`Official language`,""<br/>"","
"0","                ""Population: "",comma(countries_poly@data$Population, digits = 0),""<br/>"","
"0","                ""Density(P/Km2): "", countries_poly@data$`Density (P/Km2)`,""<br/>"","
"0","                ""Land Area(Km2): "",countries_poly@data$`Land Area(Km2)`,""<br/>"","
"0","                ""Gross domestic product(GDP): "",countries_poly@data$GDP,""<br/>"", "
"0","                sep = """")%>%"
"0","  lapply(htmltools::HTML)"
"0",""
"0",""
"0","# Create a color palette with handmade bins."
"0",""
"0","map_bins <- c(0,10000,100000,1000000,10000000,100000000,500000000,1397715000)"
"0","map_palette <- colorBin( palette=""Blues"", domain=countries_poly@data$Population, na.color=""transparent"", bins=map_bins)"
"0",""
"0","leaflet(countries_poly) %>% "
"0","  addTiles()  %>% "
"0","  setView( lat=30, lng=0 , zoom=1) %>%"
"0","  addPolygons(fillColor = ~map_palette(countries_poly@data$Population) , "
"0","              stroke= FALSE,"
"0","              fillOpacity = 0.7,"
"0","              color = ""white"","
"0","              opacity = 1,"
"0","              weight=2,"
"0","              dashArray = ""3"","
"0","              label = map_text,"
"0","              labelOptions = labelOptions("
"0","                style = list(""font-weight"" = ""normal"",padding = ""3px 8px""),"
"0","                textsize = ""12px"","
"0","                direction = ""auto"""
"0","                )"
"0","             "
"0","  )"
